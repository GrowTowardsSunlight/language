* [一维数组的索引和切片](#一维数组的索引和切片)
* [多维数组的索引](#多维数组的索引)
* [多维数组的切片](#多维数组的切片)
* [获取数组的行和列](#获取数组的行和列)
* [numpy数组切片的修改](#numpy切片的修改)
* [花哨的索引](#花哨的索引)

### 一维数组的索引和切片

正向索引从0开始递增，反向索引从-1开始递减。
 
x[0],x[-1]

与[列表和元组的索引和切片](https://github.com/zyxhzsh/artificial-intelligence/blob/master/人工智能python基础/markdown/第二章%20基本数据类型/字符串类型.md)相同。

### 多维数组的索引

以二维为例

x[i,j]或者x[i][j]

numpy数组的数据类型是固定,如果修改元素时输入了不一样的数据类型，可能会强制类型转换。

向一个整型数数组插入一个浮点值，浮点值会向下进行取整。

### 多维数组的切片

```python
x = np.random.randint(20,size=(3,5))
x
```
```
array([[16,  7,  2, 11, 18],
       [18, 15,  5,  9,  1],
       [ 4,  7,  3,  0,  5]])
```
需要两个操作表达式

```
x[a:b:s1,c:d:s2]
```

每个操作表达式与[列表和元组的切片](https://github.com/zyxhzsh/artificial-intelligence/blob/master/人工智能python基础/markdown/第二章%20基本数据类型/字符串类型.md)相同。
```python
x[:2,:3]        #前两行，前三列
x[:2,0:3:2]     #前两行，前三列每隔一列取 
x[::-1,::-1]
```
### 获取数组的行和列
```python
x = np.random.randint(20,size=(3,5))
x
```
```
array([[16,  7,  2, 11, 18],
       [18, 15,  5,  9,  1],
       [ 4,  7,  3,  0,  5]])
```
```python
x[1,:]  #第二行
x[1]    #第二行简写
x[:,0]  #第一列
```

### numpy数组切片的修改

numpy的切片获取的是视图，而非副本。如果对切片获得的元素进行修改，原来的数组也会被修改。
```python
x = np.random.randint(20,size=(3,5))
x
```
```
array([[16,  7,  2, 11, 18],
       [18, 15,  5,  9,  1],
       [ 4,  7,  3,  0,  5]])
```
```python
x1 = x[:2,:2]
x1[0][0]=0
x
```
```
array([[ 0, 17,  6,  2,  7],
       [ 0,  4,  2,  9, 18],
       [13, 17, 10, 13, 13]])
```
修改切片的安全方式
```python
x2=x[:2,:2].copy()
x2[0][0]=9  #原来的数组不会被修改
```

### 花哨的索引

- 一维数组

用数组来索引，结果的形状与索引数组一致
```
x = np.random.randint(100,size=10)
print(x)
ind1 = [2,6,9]
print('ind1:\n',x[ind1])
ind2 = np.array([[1,0],
                [2,3]])
print('ind2:\n',x[ind2])  
```
```
[23 87 87 11 80 12 80 84 58 95]
ind1:
 [87 80 95]
ind2:
 [[87 23]
 [87 11]]
```     
- 多维数组 
```python
x = np.arange(12).reshape(3,4)
print(x)
row = np.array([0,1,2])
col= np.array([1,3,0])
x[row,col]      #x[0,1],x[1,3],x[2,0]
```
```
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
array([1, 7, 8])
```
```python
row[:,np.newaxis]           #一维向量转列向量
x[row[:,np.newaxis],col]    
#广播运算，row3*1扩展成3*3，二三列和第一列相同。col扩展成3*3，二三行和第一行相同。
#广播运算见numpy数组的运算
```
```
array([[ 1,  3,  0],
       [ 5,  7,  4],
       [ 9, 11,  8]])
```

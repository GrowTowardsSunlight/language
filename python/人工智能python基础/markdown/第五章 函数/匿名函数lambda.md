匿名函数允许快速定义单行函数，类似于C语言的宏，可以用在任何需要函数的地方，这一点不同于def定义的函数。

### lambda的形式

lambda argument_list: expression  #表示一个函数，这个函数叫做lambda函数。

lambda是python的关键字。

argument_list是参数列表，与函数的参数列表一样。

expression是单行表达式，表达式的参数必须在argument_list中有定义。

### lambda的特性

lambda函数是匿名的：函数没有名字。

lambda函数有输入和输出：输入是传入到参数列表的值，输出是表达式的值。

lambda函数功能简单：单行表达式决定了lambda函数不可能完成复杂的逻辑，只能完成非常简单的功能。

### lambda的用途

1.将lambda函数赋值给一个变量，通过这个变量间接调用该lambda函数。
```python
add=lambda x, y: x+y    
'''定义加法函数lambda x, y: x+y，并将其赋值给变量add，变量add变成具有加法功能的函数。
例如，执行add(1,2)，输出为3。'''
```
2.将lambda函数赋值给某个函数，改变这个函数的功能。

为了把标准库time中的函数sleep的功能屏蔽(Mock)，我们可以在程序初始化时调用：
```
time.sleep=lambda x:None
```
在后续代码中调用time库的sleep函数将不会执行原有的功能。例如，执行time.sleep(3)时，程序不会休眠3秒钟，而是什么都不做。

3. 将lambda函数作为某个函数的返回值，返回给调用者。

函数的返回值也可以是函数。例如
```
return lambda x, y: x+y
```
返回一个加法函数。这时lambda函数实际上是定义在某个函数内部的函数，称之为嵌套函数，或者内部函数。对应的，将包含嵌套函数的函数称之为外部函数。内部函数能够访问外部函数的局部变量，这个特性是闭包(Closure)编程的基础。

4. 将lambda函数作为参数传递给其他函数。

部分Python内置函数，能够接收函数作为参数。典型的此类内置函数有这些。

- filter函数

此时lambda函数用于指定过滤列表元素的条件。例如filter(lambda x: x % 3 == 0, [1, 2, 3])指定将列表[1,2,3]中能够被3整除的元素过滤出来，其结果是[3]。

- sorted函数
此时lambda函数用于指定对列表中所有元素进行排序的准则。例如sorted([1, 2, 3, 4, 5, 6, 7, 8, 9], key=lambda x: abs(5-x))将列表[1, 2, 3, 4, 5, 6, 7, 8, 9]按照元素与5距离从小到大进行排序，其结果是[5, 4, 6, 3, 7, 2, 8, 1, 9]。

- map函数

此时lambda函数用于指定对列表中每一个元素的共同操作。例如map(lambda x: x+1, [1, 2,3])将列表[1, 2, 3]中的元素分别加1，其结果[2, 3, 4]。

- reduce函数

此时lambda函数用于指定列表中两两相邻元素的结合条件。例如reduce(lambda a, b: '{}, {}'.format(a, b), [1, 2, 3, 4, 5, 6, 7, 8, 9])将列表 [1, 2, 3, 4, 5, 6, 7, 8, 9]中的元素从左往右两两以逗号分隔的字符的形式依次结合起来，其结果是'1, 2, 3, 4, 5, 6, 7, 8, 9'。

另外，部分Python库函数也接收函数作为参数，例如gevent的spawn函数。此时，lambda函数也能够作为参数传入。

### 常见用法

在参数列表中最适合使用匿名函数，尤其是与key = 搭配

- sort()sorted()

```python
ls = [(93, 88), (79, 100), (86, 71), (85, 85), (76, 94)]
ls.sort()  #默认根据每个元组第一个元素进行排序，若第一个元素相同，则按照第二个元素进行排序。
ls
```
```python
ls.sort(key = lambda x:x[1])  #根据每个元组的第二个元素进行排序
temp = sorted(ls, key = lambda x:x[0]+x[1],reverse = True)  #根据每个元组第一与第二个元素的和排序
```

- max()min()
```python
ls = [(93, 88), (79, 100), (86, 71), (85, 85), (76, 94)]
n = max(ls, key = lambda x:x[1])
n = min(ls, key = lambda x:x[1])
```

### 争议

Python程序员对于到底要不要使用lambda意见不一致。

支持方认为使用lambda编写的代码更紧凑。

反对方认为，lambda函数能够支持的功能十分有限，其不支持多分支程序if...elif...else...和异常处理程序try ...except...。并且，lambda函数的功能被隐藏，对于编写代码之外的人员来说，理解lambda代码需要耗费一定的理解成本。他们认为，使用for循环等来替代lambda是一种更加直白的编码风格。